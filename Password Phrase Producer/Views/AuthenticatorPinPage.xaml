<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:converters="clr-namespace:Password_Phrase_Producer.Converters"
             x:Class="Password_Phrase_Producer.Views.AuthenticatorPinPage"
             Shell.NavBarIsVisible="False">
    <ContentPage.Resources>
        <ResourceDictionary>
            <converters:StringNotNullOrWhiteSpaceConverter x:Key="StringNotNullOrWhiteSpaceConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>
    
    <ContentPage.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#101018" Offset="0" />
            <GradientStop Color="#141426" Offset="0.6" />
            <GradientStop Color="#0F111A" Offset="1" />
        </LinearGradientBrush>
    </ContentPage.Background>

    <ScrollView HorizontalOptions="Fill" VerticalOptions="Fill">
        <Grid HorizontalOptions="Fill" VerticalOptions="Center" MinimumHeightRequest="400">
            <VerticalStackLayout Spacing="16" HorizontalOptions="Center" VerticalOptions="Center" MaximumWidthRequest="360" Padding="18">
                <Border
                    x:Name="BackButton"
                    Padding="10,6"
                    StrokeThickness="0"
                    BackgroundColor="#1F2338"
                    HorizontalOptions="Start">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="10" />
                    </Border.StrokeShape>
                    <Border.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnBackTapped" />
                    </Border.GestureRecognizers>
                    <HorizontalStackLayout Spacing="5" VerticalOptions="Center">
                        <Image
                            Source="chevronright.png"
                            WidthRequest="12"
                            HeightRequest="12"
                            VerticalOptions="Center"
                            Rotation="180" />
                        <Label
                            Text="Zurück"
                            FontSize="12"
                            TextColor="#CFD3FF" />
                    </HorizontalStackLayout>
                </Border>

                <VerticalStackLayout Spacing="6" HorizontalOptions="Center" VerticalOptions="Center">
                    <Label
                        x:Name="TitleLabel"
                        Text="Authenticator gesperrt"
                        FontSize="18"
                        FontAttributes="Bold"
                        TextColor="White"
                        HorizontalTextAlignment="Center" />
                    <Label
                        x:Name="SubtitleLabel"
                        Text="Bitte gib dein Master-Passwort ein."
                        FontSize="12"
                        TextColor="#9EA3C4"
                        HorizontalTextAlignment="Center" />
                </VerticalStackLayout>

                <VerticalStackLayout Spacing="10">
                    <Entry
                        x:Name="PinEntry"
                        IsPassword="True"
                        Placeholder="Master-Passwort"
                        PlaceholderColor="#7F85B2"
                        TextColor="White"
                        BackgroundColor="#1F2338"
                        HeightRequest="40"
                        Margin="0,3"
                        HorizontalOptions="Fill"
                        ReturnType="Done"
                        Completed="OnPinEntered" />
                    <Entry
                        x:Name="ConfirmPinEntry"
                        IsVisible="False"
                        IsPassword="True"
                        Placeholder="Passwort bestätigen"
                        PlaceholderColor="#7F85B2"
                        TextColor="White"
                        BackgroundColor="#1F2338"
                        HeightRequest="40"
                        Margin="0,3"
                        HorizontalOptions="Fill"
                        ReturnType="Done"
                        Completed="OnConfirmPinEntered" />

                    <Label
                        x:Name="ErrorLabel"
                        Text=""
                        TextColor="#FF7474"
                        FontSize="11"
                        IsVisible="False"
                        HorizontalTextAlignment="Center" />
                </VerticalStackLayout>

                <VerticalStackLayout Spacing="8">
                    <Button
                        x:Name="UnlockButton"
                        Text="Entsperren"
                        Clicked="OnUnlockClicked"
                        HeightRequest="40"
                        FontAttributes="Bold"
                        BackgroundColor="#4A5CFF"
                        TextColor="White"
                        CornerRadius="10" />
                </VerticalStackLayout>
            </VerticalStackLayout>
        </Grid>
    </ScrollView>
</ContentPage>

